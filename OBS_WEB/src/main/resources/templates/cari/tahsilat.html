<link rel="stylesheet" href="style/yenihsppln.css" />
<link rel="stylesheet" href="style/adrkodlari.css" />

<style>
/* =========================
   2026 GLASS THEME - TAHSILAT / CEK
   wrapper: #ara_content
   (mantık aynı, sadece renk/gradient dili standard)
   ========================= */

#ara_content{ color: rgba(255,255,255,.92);padding: 0 !important; }

/* ===== CARD / ÜST TAB BAR ===== */
#ara_content .card{
  padding: 5px !important;
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06)) !important;
  border: 1px solid rgba(255,255,255,.16) !important;
  border-radius: 18px;
  box-shadow: 0 18px 55px rgba(0,0,0,.45);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}

/* ===== NAV TABS ===== */
/* NAV TABS */
#ara_content .nav-tabs{
  border-bottom: 1px solid rgba(255,255,255,.14) !important;
  gap: 6px;
}
#ara_content .nav-tabs .nav-link{
  border: 1px solid rgba(255,255,255,.14) !important;
  border-bottom: none !important;
  background: rgba(255,255,255,.06) !important;
  color: rgba(255,255,255,.78) !important;
  border-radius: 14px 14px 0 0 !important;
  font-weight: 900;
  padding: 8px 12px;
}
#ara_content .nav-tabs .nav-link.active{
  background: linear-gradient(135deg, rgba(56,189,248,.28), rgba(34,197,94,.18)) !important;
  color: #fff !important;
  box-shadow: inset 0 0 0 1px rgba(56,189,248,.35);
}

/* ===== ANA PANEL (TEK KUTU) ===== */
#ara_content .child{
  width: 860px;
  max-width: 100%;
  margin-top: 12px;
  padding: 16px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.03);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
  box-sizing: border-box;
}

/* group-box artık “satır” (mantık aynı) */
#ara_content .group-box{
 
  padding: 7px;
  margin: 0 0 8px 0;
  width: 100%;
  box-sizing: border-box;

  /* SADECE RENK STANDARD (arka planı bozmaz, cam dili verir) */
  background: rgba(255,255,255,.02);
  
   border: 1px solid rgba(255,255,255,.12);
    border-radius: 12px;
}

/* ===== ROW ===== */
#ara_content .form-row{
  display:flex;
  align-items:center;
  gap: 10px;
  flex-wrap: nowrap;
 
 
}

/* ===== LABEL ===== */
#ara_content label{
  font-weight: 900;
  font-size: 13px;
  color: rgba(255,255,255,.82);
  margin: 0;
}

/* ===== INPUT / SELECT ===== */
#ara_content .form-control,
#ara_content .form-select{
  height: 38px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(8,14,26,.45);
  color: rgba(255,255,255,.92);
  box-sizing: border-box;
}
#ara_content .form-control:focus,
#ara_content .form-select:focus{
  border-color: rgba(56,189,248,.65);
  box-shadow: 0 0 0 5px rgba(56,189,248,.18);
  background: rgba(8,14,26,.65);
  color: #fff;
}

/* placeholder standard (diğer sayfa dili) */
#ara_content .form-control::placeholder{
  color: rgba(255,255,255,.55) !important;
  font-weight: 600;
}

/* disabled standard (renk dili aynı) */
#ara_content .form-control:disabled,
#ara_content .form-select:disabled{
  opacity: .78;
  color: rgba(255,255,255,.78);
  background: rgba(8,14,26,.30);
}

#ara_content input[type="date"]{ color-scheme: dark; }

#ara_content .saga-bold{
  text-align: right;
  font-weight: 900;
}

/* datalist ok'u (▼) beyaz */
#ara_content span[style*="pointer-events: none"]{
  color: rgba(255,255,255,.85) !important;
  text-shadow: 0 0 6px rgba(255,255,255,.35);
}

/* ===== BUTTONS ===== */
#ara_content .btn.btn-secondary{
  height: 40px;
  min-width: 40px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.08);
  color: rgba(255,255,255,.92);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: .16s ease;
}
#ara_content .btn.btn-secondary:hover{
  background: rgba(255,255,255,.12);
  border-color: rgba(56,189,248,.35);
  transform: translateY(-2px);
}

#ara_content .btn{
  height: 40px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(56,189,248,.18) !important;
  border: 1px solid rgba(56,189,248,.35) !important;
  color: rgba(255,255,255,.95) !important;
  transition: .16s ease;
  font-weight: 800;
}
#ara_content .btn.btn-primary{
  background: rgba(56,189,248,.18) !important;
  border: 1px solid rgba(56,189,248,.35) !important;
  color: rgba(255,255,255,.95) !important;
}
#ara_content .btn:hover{
 background: rgba(56,189,248,.26) !important;
  border-color: rgba(56,189,248,.55) !important;
  transform: translateY(-1px);
}

/* Kırmızı aksiyon (aynı dil) */
#ara_content #tahsilButton{
  background: linear-gradient(180deg, rgba(251,113,133,.95), rgba(220,38,38,.95)) !important;
}

/* cari/adres label renkleri */
#ara_content #lblcheskod{
  color: rgba(251,113,133,.95);
  text-shadow: 0 2px 8px rgba(0,0,0,.45);
}
#ara_content #lbladrheskod{
  color: rgba(34,197,94,.95);
  text-shadow: 0 2px 8px rgba(0,0,0,.45);
}

/* ===== CHECKBOX ===== */
#hsp_content .form-check-input{
  width: 18px;
  height: 18px;
  appearance: none;              /* native görünümü kapat */
  -webkit-appearance: none;
  border-radius: 5px;
  border: 2px solid rgba(255,255,255,.85);
  background: rgba(8,14,26,.55);
  cursor: pointer;
  position: relative;
 
}

/* işaret */
#hsp_content .form-check-input:checked{
  background: rgba(56,189,248,.25);
  border-color: #ffffff;
}

/* beyaz check */
#hsp_content .form-check-input:checked::after{
  content: "✓";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -58%);
  color: #ffffff;
  font-size: 14px;
  font-weight: 900;
  line-height: 1;
}

/* focus */
#hsp_content .form-check-input:focus{
  outline: none;
  box-shadow: 0 0 0 3px rgba(56,189,248,.35);
}

#ara_content #cektablecontainer {
  height: 55vh;
  display:flex;
  flex-direction:column;
  flex-grow:1;

  margin-top:10px;
  padding:0;
  width:100%;
  max-width:100%;
  box-sizing:border-box;
  border-radius:12px;
  overflow:auto;

  background: rgba(255,255,255,.03);

  scrollbar-width: thin;
  scrollbar-color: rgba(56,189,248,.45) rgba(255,255,255,.06);
}
 
/* =========================
   TAB2 - CEK TABLE (hover YOK)
   ========================= */
#ara_content #cekTable{
  width: 100%;
 
  min-width:1000px;
  border-collapse:separate;
  border-spacing:0;
  border-radius:12px;
  overflow:hidden;
  font-size:13px;
}

/* header */
#ara_content #cekTable thead th{
   position: sticky;
  top: 0;
  z-index: 3;
  background: linear-gradient(180deg,#1f3b5c,#162b44) !important;
  color: #fff !important;
  border: none !important;
  font-weight: 900;
  text-align: left;
  
}

/* sadece alt çizgi */
#ara_content #cekTable th,
#ara_content #cekTable td{
  /* border: 0 !important; */
 
  border-bottom: 1px solid rgba(255,255,255,.10) !important;
  padding: 6px 10px;
  height: 28px;
  white-space: nowrap;
  vertical-align: middle;
}

/* td’leri kilitle (aktif/selected rengi görünmesin) */
#ara_content #cekTable tbody td{
  background: rgba(255,255,255,.04) !important;
  color: rgba(255,255,255,.78) !important;
}

/* Bootstrap state class’larını sustur */
#ara_content #cekTable tbody tr.table-success > *,
#ara_content #cekTable tbody tr.table-active > *,
#ara_content #cekTable tbody tr.table-primary > *,
#ara_content #cekTable tbody tr.table-info > *,
#ara_content #cekTable tbody tr.table-warning > *,
#ara_content #cekTable tbody tr.table-danger > *{
  background: rgba(255,255,255,.04) !important;
  color: rgba(255,255,255,.78) !important;
}

/* =========================
   CEK TABLE - TFOOT (TOPLAM)
   ========================= */
#ara_content #cekTable tfoot td{
  background: linear-gradient(
    180deg,
    rgba(56,189,248,.22),
    rgba(37,99,235,.18)
  ) !important;
  color: #fff !important;
  font-weight: 900;
  border-top: 1px solid rgba(56,189,248,.45) !important;
  border-bottom: none !important;
  padding: 8px 10px;
}

/* "Toplam" yazısı */
#ara_content #cekTable tfoot td:nth-last-child(2){
  text-align: right;
  letter-spacing: .5px;
  text-transform: uppercase;
  color: rgba(255,255,255,.9) !important;
}

/* Toplam tutar */
#ara_content #totalTutar{
  font-size: 15px;
  font-weight: 900;
  text-align: right;
  color: #fff;
  text-shadow: 0 2px 10px rgba(56,189,248,.75);
}

#ara_content .select-arrow{
  position: absolute;
  top: 50%;
  right: 10px;
  transform: translateY(-50%);
  pointer-events: none;

  font-size: 12px;
  font-weight: 900;
  color: rgba(255,255,255,.85);
  text-shadow: 0 0 6px rgba(255,255,255,.35);
}
/* tfoot hover / focus / active KAPALI */
#ara_content #cekTable tfoot tr:hover td,
#ara_content #cekTable tfoot tr:focus td{
  background: linear-gradient(
    180deg,
    rgba(56,189,248,.22),
    rgba(37,99,235,.18)
  ) !important;
}

/* ===== ERROR ===== */
#ara_content #errorDiv{
  display:none;
  margin-top: 12px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(251,113,133,.35);
  background: rgba(251,113,133,.10);
  color: #fff;
  font-weight: 900;
}

/* datalist gizle */
#ara_content datalist{ display:none; }

/* responsive */
@media (max-width: 900px){
  #ara_content .form-row{ flex-wrap: wrap; }
}
</style>



<!-- ===== TAB BAR ===== -->
<div class="card p-4">
  <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="tab1-tab"
              data-bs-toggle="tab" data-bs-target="#tab1"
              type="button" role="tab" aria-controls="tab1" aria-selected="true">
        Tahsilat Fisi
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="tab2-tab" disabled
              data-bs-toggle="tab" data-bs-target="#tab2"
              type="button" role="tab" aria-controls="tab2" aria-selected="false">
        Cek Dokum
      </button>
    </li>
  </ul>
</div>

<div class="tab-content" id="myTabContent">

  <!-- ================= TAB 1 ================= -->
  <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">

    <div class="child">
      <div class="group-box">
        <div class="form-row">
          <input type="date" id="tahTarih" class="form-control"
                 th:value="${evrakTarih}" style="width: 160px; font-weight: 900;" />

          <div style="flex:1 1 auto;"></div>

          <button type="button" class="btn btn-secondary" onclick="tahgerifisNo()"><i class="fa fa-backward"></i></button>
          <button type="button" class="btn btn-secondary" onclick="tahsonfisNo()"><i class="fa fa-refresh"></i></button>
          <button type="button" class="btn btn-secondary" onclick="tahilerifisNo()"><i class="fa fa-forward"></i></button>

          <input type="text" id="tahevrakNo" name="tahevrakNo"
                 onkeydown="tahevrakOkuma(event)"
                 class="form-control saga-bold"
                 style="width: 110px;" />

          <button type="button" id="btnYeni" class="btn btn-secondary" onclick="tahyenifis()"><i class="fa fa-plus"></i></button>
        </div>
      </div>

      <!-- SATIR 2: tah/ted + tur + tutar -->
      <div class="group-box">
        <div class="form-row">
        <div style="position: relative; width: 160px;">
          <select class="form-select" style="width: 160px;" id="tah_ted" name="tah_ted">
            <option value="Tahsilat">Tahsilat</option>
            <option value="Tediye">Tediye</option>
          </select> 
           <span class="select-arrow">▼</span>
		</div>

		<div style="position: relative; width: 160px;">
          <select class="form-select" style="width: 160px;" id="tur" name="tur" onchange="turChange()">
            <option value="Nakit">Nakit</option>
            <option value="Cek">Cek</option>
            <option value="Kredi Karti">Kredi Karti</option>
          </select> 
           <span class="select-arrow">▼</span>		
           	</div>
          <div style="flex:1 1 auto;"></div>

          <input type="text" id="tutar" onblur="formatInputBox2(this)"
                 class="form-control saga-bold" value="0.00"
                 style="width: 200px;" />
        </div>
      </div>

      <!-- SATIR 3: Cari kod + Adres kod -->
			<div class="group-box">
				<div class="form-row" style="gap: 14px;">
					<label style="width: 70px;">Cari Kodu</label>
					<div style="position: relative; width: 140px;">
						<input class="form-control cins_bold"
							ondblclick="openSecondModal('tcheskod', 'tahsilat')"
							list="chkoduOptions" maxlength="12" id="tcheskod"
							oninput="hesapAdiOgren(this.value, 'lblcheskod'); validateAutoSearch('tcheskod', 'chkoduOptions')">
						<datalist id="chkoduOptions">
							<option th:each="kod : ${hesapKodlari}" th:value="${kod.HESAP}"></option>
						</datalist>
						 <span class="select-arrow">▼</span>
					</div>
					<div style="width:140px;"></div>
					<label style="width: 75px;">Adres Kodu</label>
					<div style="position: relative; width: 140px;">
						<input class="form-control cins_bold"
							oninput="adrhesapAdiOgren('adresheskod','lbladrheskod')"
							list="adreskoduOptions" maxlength="12" id="adresheskod"
							ondblclick="openadrkodlariModal('adresheskod', 'tahsilat')">
						<datalist id="adreskoduOptions"></datalist>
						 <span class="select-arrow">▼</span>
					</div>
				</div>
				<div class="form-row" style="margin-top: 6px; height: 25px;">
					<div style="width: 80px;"></div>
					<label id="lblcheskod" style="width: 420px; font-weight: 900;">...</label>
					<div style="flex: 1 1 auto;"></div>
					<label id="lbladrheskod" style="width: 360px; font-weight: 900;">...</label>
				</div>
			</div>
			<!-- SATIR 4: Döviz + çek info + pos banka -->
			<div class="group-box">
				<div class="form-row">
					<label style="width: 95px;margin-left:10px;">Doviz Cinsi</label>
					
					<div style="position: relative; width: 110px;">
					 <select
						class="form-select" style="width: 110px;" id="dvz_cins"
						name="dvz_cins">
						<option value="TL">TL</option>
						<option value="USD">USD</option>
						<option value="EUR">EUR</option>
						<option value="RUB">RUB</option>
					</select>
					 <span class="select-arrow">▼</span>
					</div>
					<!-- senin JS'in beklediği LABEL div -->
					<div class="col" id="divcekbilgi" style="display: none;">
						<label style="width: 100px;">Cek Sayisi</label>
					</div>
					<!-- senin JS'in beklediği INPUT div -->
					<div class="col" id="cekbilgidiv" style="display: none;">
						<label id="ceksayisi" class="form-control"
							style="width: 70px; height: 38px; display: flex; align-items: center;">0</label>
					</div>
					<div style="flex: 1 1 auto;"></div>
					<!-- senin JS'in beklediği LABEL div -->
					<div class="col" id="divposbilgi" style="display: none;">
						<label style="width: 90px">Pos Banka</label>
					</div>
					<!-- senin JS'in beklediği INPUT div -->
					<div class="col" id="posbilgidiv" style="display: none;">
						<div style="position: relative; width: 320px;">
							<input class="form-control cins_bold" style="width: 320px;"
								list="posbankaOptions" id="posBanka">
							<datalist id="posbankaOptions">
								<option th:each="kod : ${nameBanks}" th:value="${kod.BANKA}"></option>
							</datalist>
							 <span class="select-arrow">▼</span>
						</div>	 
					</div>
				</div>
			</div>
			<!-- SATIR 5: checkbox -->
			<div class="group-box">
        <div class="form-row">
            <input type="checkbox" class="form-check-input" style="margin-left:10px;" id="fisnoyazdir">
            <label class="form-check-label" for="fisnoyazdir">Yazicida Fis No Yazdir</label>
          
        </div>
      </div>

      <!-- SATIR 6: butonlar -->
      <div class="group-box">
        <div class="form-row" style="gap:10px;">
          <button class="btn btn-primary" type="button" id="tahkaydetButton" onclick="tahfisKayit()">Kaydet</button>
          <button class="btn btn-primary" type="button" id="tahsilButton" onclick="tahfisYoket()">Sil</button>
          <button class="btn btn-primary" type="button" id="indirButton" onclick="tahsilatdownloadReport()">Indir</button>
          <button class="btn btn-primary" type="button" id="carikaydetButton" onclick="openFirstModal('tahsilatckaydet')">Cari Kaydet</button>
        </div>
      </div>
      <div id="errorDiv"></div>
    </div>
  </div>

  <!-- ================= TAB 2 ================= -->
  <div class="tab-pane fade" id="tab2" role="tabpanel" aria-labelledby="tab2-tab">

    <button type="button" class="btn btn-secondary" style="margin-top:5px;" onclick="addRow()">
      <i class="fa fa-plus"></i>
    </button>

    <div id="cektablecontainer">
      <table class="table" id="cekTable">
        <thead>
          <tr>
            <th style="width:25px;"></th>
            <th>Banka</th>
            <th style="width:15%;">Sube</th>
            <th style="width:10%;">Seri No</th>
            <th style="width:10%;">Hesap</th>
            <th style="width:15%;">Borclu</th>
            <th style="width:10%;">Vade</th>
            <th class="double-column" style="width:10%;">Tutar</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
        <tfoot>
          <tr>
            <td></td><td></td><td></td><td></td><td></td><td></td>
            <td style="font-weight: 900;">Toplam</td>
            <td id="totalTutar" class="saga-bold">0.00</td>
          </tr>
        </tfoot>
      </table>
    </div>

  </div>
</div>

<input type="hidden" id="tahsilatBilgi">

<div th:replace="~{modal/borc_alacak :: modalborcalacak}"></div>
<div th:replace="~{modal/yenihsppln :: secondModal}"></div>
<div th:replace="~{modal/adres/adrhplnmodal :: adrsecondModal}"></div>


