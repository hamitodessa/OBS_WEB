<link rel="stylesheet" href="style/urnkodlari.css" />

<style>
/* =========================
   2026 CAM – IMALAT / URETIM
   wrapper: #ara_content
   hover: YOK
   ========================= */

#ara_content{ color: rgba(255,255,255,.92); }

/* ===== CARD ===== */
#ara_content .card{
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06)) !important;
  border: 1px solid rgba(255,255,255,.16) !important;
  border-radius: 18px;
  box-shadow: 0 18px 55px rgba(0,0,0,.45);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}

/* ===== LAYOUT (child / child2) ===== */
#ara_content .cardd{
  display: flex;
  gap: 12px;
  align-items: flex-start;
}

#ara_content .child,
#ara_content .child2{
  background: transparent;
  border: none !important;
  padding: 0;
}

#ara_content .child{ width: 90%; }
#ara_content .child2{ width: 10%; }

/* ===== GROUP-BOX ===== */
#ara_content .group-box{
  border: 1px solid rgba(255,255,255,.14) !important;
  background: rgba(8,14,26,.35);
  border-radius: 16px;
  padding: 12px;
  margin: 10px 0;
}

/* ===== LABEL ===== */
#ara_content label{
  color: rgba(255,255,255,.84);
  font-weight: 800;
  font-size: 13px;
}

/* ===== INPUTS / SELECT ===== */
#ara_content .form-control,
#ara_content .form-select{
  height: 44px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.16) !important;
  background: rgba(8,14,26,.55) !important;
  color: rgba(255,255,255,.92) !important;
  padding: 10px 14px !important;
  outline: none;
}

#ara_content .form-control::placeholder{
  color: rgba(255,255,255,.55) !important;
  font-weight: 600;
}

#ara_content .form-control:focus,
#ara_content .form-select:focus{
  border-color: rgba(56,189,248,.65) !important;
  box-shadow: 0 0 0 5px rgba(56,189,248,.18);
  background: rgba(8,14,26,.65) !important;
  color:#fff !important;
}

/* ===== BUTTONS ===== */
#ara_content .btn.btn-primary{
  border: none !important;
  border-radius: 12px;
  font-weight: 900;
  color: #fff !important;
  background: linear-gradient(135deg,#38bdf8,#22c55e) !important;
  box-shadow: 0 8px 22px rgba(0,0,0,.35);
}
#ara_content .btn.btn-primary:hover{ filter: brightness(1.10); }

#ara_content .btn.btn-secondary{
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.16) !important;
  background: rgba(255,255,255,.06) !important;
  color: rgba(255,255,255,.88) !important;
}
#ara_content .btn.btn-secondary:hover{
  background: rgba(56,189,248,.12) !important;
  border-color: rgba(56,189,248,.35) !important;
}

/* ===== RESIM (TAM SIĞSIN) ===== */
#ara_content .resimdiv{
  width: 100%;
  height: 100%;              /* child2 yüksekliğine göre */
  min-height: 330px;         /* istersen 280/350 yap */
  display: flex;
  justify-content: center;
  align-items: center;

  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04)) !important;
  border: 1px solid rgba(255,255,255,.18) !important;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.05);
}

/* img tam sığar, taşma yok */
#ara_content #resimGoster.resimgoster{
  display: block;
  width: 100%;
  height: 100%;
  object-fit: contain;       /* ✅ tam sığdır */
  object-position: center;
  background: rgba(0,0,0,.20) !important;
}

/* =========================
   TABLE – imaTable (hover YOK)
   ========================= */

#ara_content #imaTable{
  width: 100%;
  margin-top: 8px;
  border-collapse: separate;
  border-spacing: 0;
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 16px;
  overflow: hidden;
  background: rgba(255,255,255,.03);
}

/* header sticky + gradient */
#ara_content #imaTable thead th{
  position: sticky;
  top: 0;
  z-index: 2;
  background: linear-gradient(180deg,#1f3b5c,#162b44) !important;
  color: #fff !important;
  font-size: 13px;
  font-weight: 900;
  text-align: left;
  white-space: nowrap;
}

/* sadece alt çizgi */
#ara_content #imaTable th,
#ara_content #imaTable td{
  border: 0 !important;
  border-bottom: 1px solid rgba(255,255,255,.10) !important;
  padding: 6px 10px !important;
  height: 28px;
  white-space: nowrap;
  vertical-align: middle;
}

/* td cam */
#ara_content #imaTable tbody td{
  background: rgba(255,255,255,.04) !important;
  color: rgba(255,255,255,.78) !important;
}

/* Bootstrap state class’larını sustur */
#ara_content #imaTable tbody tr.table-success > *,
#ara_content #imaTable tbody tr.table-active > *,
#ara_content #imaTable tbody tr.table-primary > *,
#ara_content #imaTable tbody tr.table-info > *,
#ara_content #imaTable tbody tr.table-warning > *,
#ara_content #imaTable tbody tr.table-danger > *{
  background: rgba(255,255,255,.04) !important;
  color: rgba(255,255,255,.78) !important;
}

/* hover tamamen kapalı (NET) */
#ara_content #imaTable tbody tr:hover > *{
  background: rgba(255,255,255,.04) !important;
  color: rgba(255,255,255,.78) !important;
}

/* seçili satır istersen (hover yok ama selected olabilir) */
#ara_content #imaTable tbody tr.selected > *{
  background: linear-gradient(135deg, rgba(56,189,248,.18), rgba(34,197,94,.12)) !important;
  color: #fff !important;
}

/* right align helpers */
#ara_content .double-column,
#ara_content .saga-bold{ text-align: right !important; font-weight: 900; }

/* ===== TFOOT (TOPLAM) ===== */
#ara_content #imaTable tfoot td{
  background: linear-gradient(180deg, rgba(56,189,248,.22), rgba(37,99,235,.18)) !important;
  color: #fff !important;
  font-weight: 900;
  border-top: 1px solid rgba(56,189,248,.45) !important;
  border-bottom: none !important;
  padding: 8px 10px !important;
}

#ara_content #totalTutar{
  font-size: 15px;
  font-weight: 900;
  text-align: right;
  color: #fff !important;
  text-shadow: 0 2px 10px rgba(56,189,248,.55);
}

/* error */
#ara_content #errorDiv{
  display:none;
  margin-top: 12px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(251,113,133,.35);
  background: rgba(251,113,133,.10);
  color: #fff;
  font-weight: 900;
}

#ara_content .cam-border-2026{
  margin-top: 10px;
  padding: 10px;

  

  border: 1px solid rgba(56,189,248,.35); /* CAM MAVİ */
  border-radius: 16px;

  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.06),
    0 12px 35px rgba(0,0,0,.45);

  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}
#ara_content input[type="date"]{
  color-scheme: dark;
}



/* =========================
   2026 CAM – IMA TABLE (SATIR INPUTLARI KOMPAKT)
   Scope: #ara_content #imaTable
   ========================= */

/* Hücre padding ve yüksekliği sıkı */
#ara_content #imaTable th,
#ara_content #imaTable td{
  padding: 4px 8px !important;
  height: 26px !important;
  vertical-align: middle !important;
}

/* Satır içi input/select/label -> KOMPAKT */
#ara_content #imaTable tbody .form-control,
#ara_content #imaTable tbody .form-select{
  height: 30px !important;          /* ✅ kompakt */
  min-height: 30px !important;
  border-radius: 10px !important;
  padding: 4px 8px !important;
  font-size: 12px !important;
  font-weight: 900 !important;

  border: 1px solid rgba(255,255,255,.14) !important;
  background: rgba(8,14,26,.55) !important;
  color: rgba(255,255,255,.95) !important;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06) !important;
}

/* label.form-control (readonly gibi kullandıkların) */
#ara_content #imaTable tbody label.form-control{
  display: flex !important;
  align-items: center !important;
  margin: 0 !important;
}
#ara_content #imaTable tbody label.form-control span{
  display: inline-block;
  width: 100%;
  line-height: 1;
}

/* Focus daha ince */
#ara_content #imaTable tbody .form-control:focus,
#ara_content #imaTable tbody .form-select:focus{
  border-color: rgba(56,189,248,.65) !important;
  box-shadow: 0 0 0 4px rgba(56,189,248,.16) !important;
  background: rgba(8,14,26,.65) !important;
}

/* İçteki ok (▼) daha küçük + hizalı */
#ara_content #imaTable tbody td > div[style*="position: relative"] > span{
  right: 8px !important;
  font-size: 12px !important;
  color: rgba(255,255,255,.78) !important;
  text-shadow: 0 0 10px rgba(0,0,0,.55);
}

/* datalist/select için sağ padding (okla çakışmasın) */
#ara_content #imaTable tbody td > div[style*="position: relative"] input.form-control,
#ara_content #imaTable tbody td > div[style*="position: relative"] select.form-control{
  padding-right: 26px !important;
}

/* trash butonu da kompakt */
#ara_content #imaTable tbody .btn.btn-secondary{
  height: 30px !important;
  width: 34px !important;
  padding: 0 !important;
  border-radius: 10px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;

  border: 1px solid rgba(255,255,255,.16) !important;
  background: rgba(255,255,255,.06) !important;
  color: rgba(255,255,255,.88) !important;
}
#ara_content #imaTable tbody .btn.btn-secondary:hover{
  background: rgba(56,189,248,.12) !important;
  border-color: rgba(56,189,248,.35) !important;
}

/* tablo satırı içinde ml-2 falan taşırmasın */
#ara_content #imaTable tbody .ml-2{ margin-left: 0 !important; }

#ara_content .ima-rel{
  position: relative;
  width: 100%;
}
#ara_content .ima-arrow{
  position: absolute;
  top: 50%;
  right: 10px;
  transform: translateY(-50%);
  pointer-events: none;
}

</style>

<div class="card p-0">
	<div class="cardd p-4">
		<div class="child">
			<!-- ****************************************************************************************************** -->
			<div class="group-box">
				<div style="display: flex; align-items: center; ">
					<label style="width:60px;">Fis No</label>
					<div style="min-width: 120px;max-width: 120px;">
						<input class="form-control" style="font-weight: bold;" maxlength="10" id="fisno"  onkeydown="if(event.key === 'Enter') uretimOku()" ondblclick="yeniFis();">
					</div>
					<span style="padding-left: 5px;"></span>
					<button type="button" class="btn btn-secondary ml-2" onclick="sonfis()">
							<i class="fa fa-refresh"></i>
					</button>
					<span style="padding-left: 10px;"></span> 
					<input type="date" id="fisTarih" class="form-control"
							th:value="${tarih}" style="width: 125px; font-weight: bold;" />
					
					<span style="padding-left: 10px;"></span> 	
					<label style="min-width:60px;">Depo</label>	
					 <div style="position:relative; width:125px;">
						<select class="form-select cins_bold" style="width: 120px; " id="depo" >
    						<option th:each="kod : ${depoKodlari}" th:value="${kod.DEPO}" th:text="${kod.DEPO}"></option>
						</select>
					<span style="position:absolute; top:50%; right:12px;
              transform:translateY(-50%); pointer-events:none; color:#fff; text-shadow:0 0 6px rgba(255,255,255,.35);
              font-weight:700;line-height:1;">▼</span>
          	</div>	
					<span style="padding-left: 10px;"></span> 	
					<label style="min-width:75px;">Ana Grup</label>	
				 <div style="position:relative; width:125px;">	
						<select class="form-select cins_bold" style="width: 120px;" id="anagrp" onchange="anagrpChanged(this)">
    						<option th:each="kod : ${anaKodlari}" th:value="${kod.ANA_GRUP}" th:text="${kod.ANA_GRUP}"></option>
						</select>
					<span style="position:absolute; top:50%; right:12px;
              transform:translateY(-50%); pointer-events:none; color:#fff; text-shadow:0 0 6px rgba(255,255,255,.35);
              font-weight:700;line-height:1;">▼</span>
          	</div>		
						
					<span style="padding-left: 10px;"></span> 	
					<label style="min-width:75px;">Alt Grup</label>	
					 <div style="position:relative; width:125px;">	
						<select class="form-select cins_bold" style="width: 120px; " id="altgrp" disabled>
    						
						</select>
					<span style="position:absolute; top:50%; right:12px;
              transform:translateY(-50%); pointer-events:none; color:#fff; text-shadow:0 0 6px rgba(255,255,255,.35);
              font-weight:700;line-height:1;">▼</span>
          	</div>		
				</div>
				
				<!-- 				Uretim Bilgileri -->
				<div class="cam-border-2026">
				<div style="display: flex; align-items: center;margin-top: 10px;margin-bottom: 10px;">
					<span style="padding-left: 5px;"></span>
					<label style="min-width: 80px;">Urun Kodu</label>
					<input class="form-control" style="width: 100px; font-weight: bold;" maxlength="12" ondblclick="openurunkodlariModal('girenurnkod', 'imalat','ukodukod')" id="girenurnkod" onkeydown="if(event.key === 'Enter') urnaramaYap('Kodu')">
					<span style="padding-left: 10px;"></span>
					<button type="button" class="btn btn-secondary ml-2" onclick="">
							<i class="fa fa-refresh"></i>
					</button>
					<span style="padding-left: 10px;"></span>
					<label  style="min-width: 75px;">Recete Kodu</label>
					<span style="padding-left: 10px;"></span>
					<input class="form-control cins_bold" maxlength="10" id="recetekod" style="width: 125px;">
					<span style="padding-left: 10px;"></span>
					<label  style="min-width: 75px;">Uretim Miktari</label>
					<span style="padding-left: 10px;"></span>
					<input class="form-control saga_bold" maxlength="10" id="uretmiktar" value="0" style="width: 75px; font-weight: bold;">
					<span style="padding-left: 10px;"></span>
					<label id="mikbirim" style="min-width: 75px;"></label>
					<span style="padding-left: 10px;"></span>
					<label  style="width: 75px;">Para Cinsi</label>
					<input class="form-control" id="dvzcins" th:value="${doviz}" style="width: 75px;">
				</div>
				</div>
				
				<div style="display: flex;align-items:center;margin-top:7px;">
					<label style="width: 150px;">Uygulanacak Fiat</label>
					<span style="padding-left: 10px;"></span>
					
					<select class="form-select" id="uygulananfiat" onchange="uygulananfiatchange()" style="width: 150px;">
						<option value=""></option>
						<option value="ortfiat">Ortalama_Gris_Fiati</option>
						<option value="sonimalat">Son_Imalat</option>
						<option value="fiat1">Fiat_1</option>
						<option value="fiat2">Fiat_2</option>
						<option value="fiat3">Fiat_3</option>
					</select>
						
					<span style="padding-left: 10px;"></span>
					<label id="datlabel"  style="visibility:hidden">Dikkatae Alinacak Tarih</label>
					<span style="padding-left: 10px;"></span>
					<input type="date" id="fiatTarih"  style="visibility:hidden;width: 125px;" class="form-control"
							value="1900-01-01"  />
							
					<span style="padding-left: 100px;"></span>
					<label style="width: 150px;">Uretim Birim Fiat</label>
					<span style="padding-left: 10px;"></span>
					<label style="width: 75px; font-weight: bold;" id="birimfiati">0.00</label>
				</div>	
				<div style="display: flex;align-items:center;margin-top:7px;">
					<label style="width: 150px;">Aciklama</label>
					<span style="padding-left: 10px;"></span>
					<input class="form-control" maxlength="50" id="aciklama" style="width: 300px;">
				</div>	
			</div>

			<div class="group-box">
				<div class="form-row">
					<button class="btn btn-primary" type="button" id="urekaydetButton"
						onclick="ureKayit()">Kaydet</button>
					<span style="padding-left: 5px;"></span>
					<button class="btn btn-primary" type="button" id="uresilButton"
						onclick="ureYoket()">Sil</button>
				</div>
			</div>

		</div>
		<div class="child2">
				<div class="resimdiv">
 					<img id="resimGoster" class="resimgoster"  src="" alt="Base64 Resim" style="display: none;" />
     			</div>
		</div>
	</div>
</div>
<div id="errorDiv"></div>
		
<div style="display: flex;align-items:center;margin-top:7px;">
	<button type="button" class="btn btn-secondary ml-2" style="margin-top: 5px;" onclick="satirekle()"><i class="fa fa-plus"></i></button>
	<span style="padding-left: 5px;"></span>
	<button type="button" class="btn btn-secondary ml-2" style="margin-top: 5px;" onclick="uretimYap()"><i class="fa fa-archive"></i></button>

</div>
<table class="table table-bordered" id="imaTable"
	style="margin-top: 5px;">
	<thead class="thead-dark">
		<tr>
			<th style="width:25px"></th>
			<th style="width:5%">TUR</th>
			<th style="width:7%">URUN KODU</th>
			<th>ADI</th>
			<th style="width:20%">IZAHAT</th>
			<th style="width:10%">DEPO</th>
			<th class="double-column" style="width:7%">MIKTAR</th>
			<th style="width:6%">BIRIM</th>
			<th class="double-column" style="width:10%">FIAT</th>
			<th class="double-column" style="width:10%">TUTAR</th>
		</tr>
	</thead>
	<tbody id="tbody">
	</tbody>
	<tfoot>
		<tr>
		<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td id="totalTutar" class="saga-bold">0.00</td>
		</tr>
	</tfoot>
</table>
 <div class="card p-4">
	<div class="form-row">
		<span style="padding-left: 20px;width:100px;">Adi :</span>
		<label style="width:150px;" id="adi">...</label> 
		<span style="padding-left: 20px;width:100px;">Birim :</span>
		<label style="width:100px;" id="birim">...</label> 
		<span style="padding-left: 20px;width:150px;">Ana Grup :</span>
		<label style="width:150px;" id="anagrpl">...</label> 
		<span style="padding-left: 20px;width:100px;">Agirlik :</span>
		<label style="width:100px;" id="agirlik">...</label> 
	</div>
	<div class="form-row">
		<span style="padding-left: 20px;width:100px;">Barkod :</span>
		<label style="width:150px;" id="barkod">...</label> 
		<span style="padding-left: 20px;width:100px;">Sinif :</span>
		<label style="width:100px;" id="sinif">...</label> 
		<span style="padding-left: 20px;width:150px;">Alt Grup :</span>
		<label style="width:150px;" id="altgrpl">...</label> 
		
	</div>
</div>
<input type="hidden" id="uretimBilgi"  value="">
<input type="hidden" id="defaultdvzcinsi" th:value="${doviz}">

<div th:replace="~{modal/stok/urunadlari :: urnsecondModal}"></div>

<script src="/obs_js_files/stok/uretim.js"></script>
