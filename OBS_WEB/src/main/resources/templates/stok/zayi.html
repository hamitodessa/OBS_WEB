<link rel="stylesheet" href="style/urnkodlari.css" />

<style>
/* =========================
   2026 CAM – ZAI (CLEAN FINAL)
   Scope: #ara_content
   ========================= */

#ara_content{ color: rgba(255,255,255,.92); }

/* Card */
#ara_content .cam-card{
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06)) !important;
  border: 1px solid rgba(255,255,255,.16) !important;
  border-radius: 18px;
  box-shadow: 0 18px 55px rgba(0,0,0,.45);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  width:90%;
}

/* Tabs */
#ara_content .cam-tabs{
  border-bottom: 1px solid rgba(255,255,255,.14) !important;
  gap: 8px;
}
#ara_content .cam-tabs .nav-link{
  border: 1px solid rgba(255,255,255,.14) !important;
  border-bottom: none !important;
  background: rgba(255,255,255,.06) !important;
  color: rgba(255,255,255,.80) !important;
  border-radius: 14px 14px 0 0 !important;
  font-weight: 900;
  padding: 10px 14px;
}
#ara_content .cam-tabs .nav-link.active{
  background: linear-gradient(135deg, rgba(56,189,248,.28), rgba(34,197,94,.18)) !important;
  color: #fff !important;
  box-shadow: inset 0 0 0 1px rgba(56,189,248,.35);
}

/* Base label */
#ara_content label{
  color: rgba(255,255,255,.84);
  font-weight: 900;
  font-size: 12px;
}

/* Inputs / Select */
#ara_content .cam-input,
#ara_content .cam-select{
  height: 30px;
  min-height: 30px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.16) !important;
  background: rgba(8,14,26,.55) !important;
  color: rgba(255,255,255,.92) !important;
  padding: 6px 10px !important;
  outline: none;
  font-weight: 900;
  font-size: 12px;
  box-sizing: border-box;
}
#ara_content .cam-input:focus,
#ara_content .cam-select:focus{
  border-color: rgba(56,189,248,.65) !important;
  box-shadow: 0 0 0 4px rgba(56,189,248,.16);
  background: rgba(8,14,26,.65) !important;
  color:#fff !important;
}
#ara_content input[type="date"]{ color-scheme: dark; }

/* Input group addon */
#ara_content .cam-addon{
  height: 30px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.16) !important;
  background: rgba(8,14,26,.45) !important;
  color: rgba(255,255,255,.88) !important;
  font-weight: 900;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
  font-size: 12px;
}

/* Buttons (bootstrap override) */
#ara_content .btn-primary{
  border-radius: 10px;
  font-weight: 900;
  height: 40px;
  background: rgba(56,189,248,.18) !important;
  border: 1px solid rgba(56,189,248,.35) !important;
  color: rgba(255,255,255,.95) !important;
}
#ara_content .btn-primary:hover{
  background: rgba(56,189,248,.26) !important;
  border-color: rgba(56,189,248,.55) !important;
  transform: translateY(-1px);
}

#ara_content .btn.btn-secondary{
  border-radius: 10px;
   background: rgba(56,189,248,.18) !important;
  border: 1px solid rgba(56,189,248,.35) !important;
  color: rgba(255,255,255,.95) !important;
}
#ara_content .btn.btn-secondary:hover{
   background: rgba(56,189,248,.26) !important;
  border-color: rgba(56,189,248,.55) !important;
  transform: translateY(-1px);
}
/* Icon buttons (trash/plus/refresh) */
#ara_content .cam-icon{
  height: 30px !important;
  width: 34px !important;
  padding: 0 !important;
  border-radius: 10px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* Group box */
#ara_content .group-box{
  position: relative;
  overflow-x: auto;
  overflow-y: hidden;
  scroll-behavior: smooth;
  overscroll-behavior-x: contain;

  border: 1px solid rgba(255,255,255,.14) !important;
  background: rgba(8,14,26,.35) !important;
  border-radius: 16px;
  padding: 10px;
  margin: 10px 0;
}
#ara_content .group-box::-webkit-scrollbar{ height: 10px; }
#ara_content .group-box::-webkit-scrollbar-track{
  background: rgba(255,255,255,.06);
  border-radius: 10px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
}
#ara_content .group-box::-webkit-scrollbar-thumb{
  background: linear-gradient(135deg, rgba(56,189,248,.65), rgba(34,197,94,.55));
  border-radius: 10px;
  box-shadow: 0 0 12px rgba(56,189,248,.35), inset 0 0 0 1px rgba(255,255,255,.25);
}
#ara_content .group-box{
  scrollbar-width: thin;
  scrollbar-color: rgba(56,189,248,.65) rgba(255,255,255,.06);
}

/* Top layout row */
#ara_content .zai-row{
  display: grid;
  grid-template-columns: 85px 120px 38px 125px 75px 240px 75px 280px;
  gap: 8px 10px;
  align-items: center;
}

/* Actions row */
#ara_content .zai-actions{
  display:flex;
  align-items:center;
  gap: 10px;
  flex-wrap: wrap;
}

/* Numbers right */
#ara_content .ta-right,
#ara_content .saga-bold{
  text-align:right !important;
  font-variant-numeric: tabular-nums;
  font-weight: 900 !important;
}

/* ===== ARROW (tek sistem) ===== */
#ara_content .zai-rel{
  position: relative;
  width: 100%;
  display: block;
  min-width: 0;
}

/* native select ok kapat */
#ara_content select.cam-select{
  appearance: none !important;
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
}

/* input/select genişlik + oka yer */
#ara_content .zai-rel > .cam-input,
#ara_content .zai-rel > .cam-select{
  width: 100% !important;
  min-width: 0 !important;
  padding-right: 32px !important;
  box-sizing: border-box !important;
}

/* arrow */
#ara_content .zai-arrow{
  position: absolute;
  top: 50%;
  right: 10px;
  transform: translateY(-50%);
  pointer-events: none;
  z-index: 10;
  font-weight: 900;
  font-size: 12px;
  color: rgba(255,255,255,.78);
  text-shadow: 0 0 10px rgba(0,0,0,.55);
}

/* ===== TABLE ===== */
#ara_content #zaiTable{
  width: 100%;
  min-width:1000px;
  table-layout: fixed; /* colgroup width oturtur */
  border-collapse: separate;
  border-spacing: 0;
  border: 1px solid rgba(255,255,255,.14) !important;
  border-radius: 16px;
  overflow: hidden;
  background: rgba(255,255,255,.03) !important;
}
#ara_content #zaiTable thead th{
  position: sticky;
  top: 0;
  z-index: 2;
  background: linear-gradient(180deg,#1f3b5c,#162b44) !important;
  color: #fff !important;
  font-size: 12px;
  font-weight: 900;
  text-align: left;
  white-space: nowrap;
}
#ara_content #zaiTable th,
#ara_content #zaiTable td{
  border: 0 !important;
  border-bottom: 1px solid rgba(255,255,255,.10) !important;
  padding: 4px 6px !important;   /* input kesilmesin */
  height: 26px !important;
  vertical-align: middle !important;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
#ara_content #zaiTable tbody td{
  background: rgba(255,255,255,.04) !important;
  color: rgba(255,255,255,.78) !important;
}
#ara_content #zaiTable tfoot td{
  background: linear-gradient(180deg, rgba(56,189,248,.22), rgba(37,99,235,.18)) !important;
  color: #fff !important;
  font-weight: 900;
  border-top: 1px solid rgba(56,189,248,.45) !important;
  border-bottom: none !important;
  padding: 8px 10px !important;
}

/* Row inputs compact */
#ara_content #zaiTable tbody .cam-input,
#ara_content #zaiTable tbody .cam-select{
  height: 30px !important;
  min-height: 30px !important;
  border-radius: 10px !important;
  padding: 4px 8px !important;
  font-size: 12px !important;
}

/* TD içindeki wrapper tam otursun (150px vs kesilme fix) */
#ara_content #zaiTable td .zai-rel{
  width: 100%;
  min-width: 0;
}
#ara_content #zaiTable td .cam-input,
#ara_content #zaiTable td .cam-select{
  width: 100% !important;
  min-width: 0 !important;
  box-sizing: border-box !important;
}

/* readonly label (birim) */
#ara_content .cam-label{
  display:flex !important;
  align-items:center !important;
  margin: 0 !important;
}
#ara_content .cam-label span{ width:100%; line-height:1; }

/* Error */
#ara_content #errorDiv{
  display:none;
  margin-top: 12px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(251,113,133,.35);
  background: rgba(251,113,133,.10);
  color: #fff;
  font-weight: 900;
}

/* Info badges (SOL hizalı) */
#ara_content .zai-badges{
  display:flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-left: 20px;
  justify-content: flex-start;
  align-items: center;
}
#ara_content .zai-badge{
  display:inline-flex;
  align-items:center;
  justify-content:flex-start;
  min-width: 150px;
  padding: 4px 10px;
  border-radius: 10px;
  background: rgba(255,255,255,.04) !important;
  border: 1px solid rgba(255,255,255,.10) !important;
  color: rgba(255,255,255,.92) !important;
  font-weight: 900 !important;
  text-align: left;
}
#ara_content .zai-badge:empty::before{ content:"—"; opacity:.65; }

#ara_content .zai-table-scroll{
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
}

/* istersen aynı sexy scroll burada da */
#ara_content .zai-table-scroll::-webkit-scrollbar{ height: 10px; }
#ara_content .zai-table-scroll::-webkit-scrollbar-track{
  background: rgba(255,255,255,.06);
  border-radius: 10px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
}
#ara_content .zai-table-scroll::-webkit-scrollbar-thumb{
  background: linear-gradient(135deg, rgba(56,189,248,.65), rgba(34,197,94,.55));
  border-radius: 10px;
  box-shadow: 0 0 12px rgba(56,189,248,.35), inset 0 0 0 1px rgba(255,255,255,.25);
}
#ara_content .zai-table-scroll{
  scrollbar-width: thin;
  scrollbar-color: rgba(56,189,248,.65) rgba(255,255,255,.06);
}

</style>


<!-- TABS HEADER -->
<div class="cam-card p-3">
  <ul class="nav nav-tabs cam-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="tab1-tab"
        data-bs-toggle="tab" data-bs-target="#tab1" type="button" role="tab"
        aria-controls="tab1" aria-selected="true">Fatura Bilgileri</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="tab2-tab"
        data-bs-toggle="tab" data-bs-target="#tab2" type="button" role="tab"
        aria-controls="tab2" aria-selected="false">Ek Bilgiler</button>
    </li>
  </ul>
</div>

<div class="tab-content" id="myTabContent">

  <!-- TAB 1 -->
  <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">
    <div class="cam-card p-3 mt-2">

      <div class="group-box">
        <div class="zai-row">

          <label>Fis No</label>
          <input class="cam-input" maxlength="10" id="fisno"
            onkeydown="if(event.key==='Enter') OBS.ZAI.zaiOku()"
            ondblclick="OBS.ZAI.yeniFis();" />

          <button type="button" class="btn btn-secondary cam-icon" onclick="OBS.ZAI.sonfis()">
            <i class="fa fa-refresh"></i>
          </button>

          <input type="date" id="fisTarih" class="cam-input" th:value="${fisTarih}" />

          <label>Ana Grup</label>
          <div class="zai-rel">
            <select class="cam-select" id="anagrp" onchange="OBS.ZAI.anagrpChanged(this)">
              <option th:each="kod : ${anaKodlari}" th:value="${kod.ANA_GRUP}" th:text="${kod.ANA_GRUP}"></option>
            </select>
            <span class="zai-arrow">▼</span>
          </div>

          <label>Alt Grup</label>
          <div class="zai-rel">
            <select class="cam-select" id="altgrp" disabled></select>
            <span class="zai-arrow">▼</span>
          </div>

        </div>
      </div>

      <div class="group-box">
        <div class="zai-actions">
          <button class="btn btn-primary" type="button" id="zaikaydetButton" onclick="OBS.ZAI.zaiKayit()">Kaydet</button>
          <button class="btn btn-primary" type="button" id="zaisilButton" onclick="OBS.ZAI.zaiYoket()">Sil</button>
        </div>
      </div>

      <div id="errorDiv"></div>
    </div>
  </div>

  <!-- TAB 2 -->
  <div class="tab-pane fade" id="tab2" role="tabpanel" aria-labelledby="tab2-tab">
    <div class="cam-card p-3 mt-2">
      <div class="input-group mb-2">
        <span class="input-group-text cam-addon" style="width:150px;">1 -</span>
        <input type="text" id="a1" class="cam-input" style="max-width:300px;">
      </div>
      <div class="input-group">
        <span class="input-group-text cam-addon" style="width:150px;">2 -</span>
        <input type="text" id="a2" class="cam-input" style="max-width:300px;">
      </div>
    </div>
  </div>

</div>

<!-- SATIR EKLE -->
<div class="mt-2">
  <button type="button" class="btn btn-secondary cam-icon" onclick="OBS.ZAI.satirekle()">
    <i class="fa fa-plus"></i>
  </button>
</div>

<!-- TABLE -->
<div class="cam-card p-2 mt-2">
<div class="zai-table-scroll">
  <table class="table table-bordered" id="zaiTable">

    <!-- ✅ width sadece burada -->
    <colgroup>
      <col style="width:50px">
      <col style="width:100px">
      <col style="width:100px">
      <col style="width:175px">
      <col style="width:150px">
      <col style="width:100px">
      <col style="width:80px">
      <col style="width:175px">
      <col>
    </colgroup>

    <thead>
      <tr>
        <th></th>
        <th>Barkod</th>
        <th>Urun Kodu</th>
        <th>Depo</th>
        <th class="saga-bold">Fiat</th>
        <th class="saga-bold">Miktar</th>
        <th>Birim</th>
        <th class="saga-bold">Tutar</th>
        <th>Izahat</th>
      </tr>
    </thead>

    <tbody id="tbody"></tbody>

    <tfoot>
      <tr>
        <td></td><td></td><td></td><td></td>
        <td></td>
        <td id="totalMiktar" class="saga-bold">0.000</td>
        <td></td>
        <td id="totalTutar" class="saga-bold">0.00</td>
        <td></td>
      </tr>
    </tfoot>
  </table>
 </div>
  <!-- INFO -->
  <div class="group-box zai-info">
    <div class="zai-actions">
      <span style="width:90px; font-weight:900; color:rgba(255,255,255,.72);">Barkod:</span>
      <input id="barkod" class="cam-input" style="width:170px;" />

      <div class="zai-badges">
        <label id="adil" class="zai-badge"></label>
        <label id="anagrpl" class="zai-badge"></label>
        <label id="altgrpl" class="zai-badge"></label>
      </div>
    </div>
  </div>
</div>

<input type="hidden" id="zayiBilgi">


<div th:replace="~{modal/stok/urunadlari :: urnsecondModal}"></div>
