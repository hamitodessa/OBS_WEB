<link rel="stylesheet" href="style/urnkodlari.css" />

<style>
/* =========================
   2026 CAM â€“ ZAI (FINAL CLEAN v3)
   Scope: #ara_content
   - TAB1: tek yatay scroll (zai-tab1-scroll)
   - Grid taÅŸmasÄ± yok
   - Table + Info scroll ayrÄ±
   ========================= */

#ara_content{
  color: rgba(255,255,255,.92);
  padding: 0 !important;
  /* TOKENS */
  --cam-bg1: rgba(255,255,255,.10);
  --cam-bg2: rgba(255,255,255,.06);
  --cam-line: rgba(255,255,255,.16);
  --cam-line2: rgba(255,255,255,.14);
  --cam-dark: rgba(8,14,26,.55);
  --cam-dark2: rgba(8,14,26,.65);
  --cam-ac1: rgba(56,189,248,.65);
  --cam-ac2: rgba(34,197,94,.55);
}

/* ---------- CARD ---------- */
#ara_content .cam-card{
  background: linear-gradient(180deg, var(--cam-bg1), var(--cam-bg2)) !important;
  border: 1px solid var(--cam-line) !important;
  border-radius: 18px;
  box-shadow: 0 18px 55px rgba(0,0,0,.45);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  
  width:90%;
}

/* ---------- TABS ---------- */
#ara_content .cam-tabs{
  border-bottom: 1px solid var(--cam-line2) !important;
  gap: 8px;
}
#ara_content .cam-tabs .nav-link{
  border: 1px solid var(--cam-line2) !important;
  border-bottom: none !important;
  background: rgba(255,255,255,.06) !important;
  color: rgba(255,255,255,.80) !important;
  border-radius: 14px 14px 0 0 !important;
  font-weight: 900;
  padding: 10px 14px;
}
#ara_content .cam-tabs .nav-link.active{
  background: linear-gradient(135deg, rgba(56,189,248,.28), rgba(34,197,94,.18)) !important;
  color: #fff !important;
  box-shadow: inset 0 0 0 1px rgba(56,189,248,.35);
}

/* ---------- LABEL ---------- */
#ara_content label{
  color: rgba(255,255,255,.84);
  font-weight: 900;
  font-size: 12px;
  line-height: 1;
}

/* ---------- INPUTS / SELECT ---------- */
#ara_content .cam-input,
#ara_content .cam-select{
  height: 34px;
  min-height: 34px;
  border-radius: 12px;
  border: 1px solid var(--cam-line) !important;
  background: var(--cam-dark) !important;
  color: rgba(255,255,255,.94) !important;
  padding: 6px 10px !important;
  outline: none;
  font-weight: 900;
  font-size: 12px;
  box-sizing: border-box;
}
#ara_content .cam-input::placeholder{
  color: rgba(255,255,255,.55) !important;
  font-weight: 800;
}
#ara_content .cam-input:focus,
#ara_content .cam-select:focus{
  border-color: var(--cam-ac1) !important;
  box-shadow: 0 0 0 4px rgba(56,189,248,.16);
  background: var(--cam-dark2) !important;
  color:#fff !important;
}
#ara_content input[type="date"]{ color-scheme: dark; }

/* native select ok kapat */
#ara_content select.cam-select{
  appearance: none !important;
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
}

/* ---------- INPUT GROUP ADDON ---------- */
#ara_content .cam-addon{
  height: 34px;
  min-height: 34px;
  border-radius: 12px;
  border: 1px solid var(--cam-line) !important;
  background: rgba(8,14,26,.45) !important;
  color: rgba(255,255,255,.88) !important;
  font-weight: 900;
  font-size: 12px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
}

/* ---------- BUTTONS ---------- */
#ara_content .btn-primary{
  border-radius: 12px;
  font-weight: 900;
  height: 34px;
  padding: 6px 14px;
  background: rgba(56,189,248,.18) !important;
  border: 1px solid rgba(56,189,248,.35) !important;
  color: rgba(255,255,255,.95) !important;
}
#ara_content .btn-primary:hover{
  background: rgba(56,189,248,.26) !important;
  border-color: rgba(56,189,248,.55) !important;
  transform: translateY(-1px);
}
#ara_content .btn.btn-secondary{
  border-radius: 12px;
  height: 34px;
  padding: 6px 12px;
  font-weight: 900;
  background: rgba(255,255,255,.06) !important;
  border: 1px solid rgba(255,255,255,.16) !important;
  color: rgba(255,255,255,.92) !important;
}
#ara_content .btn.btn-secondary:hover{
  background: rgba(56,189,248,.12) !important;
  border-color: rgba(56,189,248,.35) !important;
  transform: translateY(-1px);
}
#ara_content .cam-icon{
  height: 34px !important;
  width: 40px !important;
  padding: 0 !important;
  border-radius: 12px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* ---------- GROUP BOX ---------- */
#ara_content .group-box{
  position: relative;
  border: 1px solid var(--cam-line2) !important;
  background: rgba(8,14,26,.35) !important;
  border-radius: 16px;
  padding: 10px;
  margin: 10px 0;

  /* iÃ§eriden taÅŸan gÃ¶rÃ¼ntÃ¼yÃ¼ kes (grid saÄŸa taÅŸma gÃ¶rÃ¼nmesin) */
  overflow: hidden;
  width: 1100px;
}

/* ---------- SCROLL SKIN (reusable) ---------- */
#ara_content .zai-tab1-scroll::-webkit-scrollbar,
#ara_content .zai-table-scroll::-webkit-scrollbar,
#ara_content .zai-actions-scroll::-webkit-scrollbar{ height: 10px; }

#ara_content .zai-tab1-scroll::-webkit-scrollbar-track,
#ara_content .zai-table-scroll::-webkit-scrollbar-track,
#ara_content .zai-actions-scroll::-webkit-scrollbar-track{
  background: rgba(255,255,255,.06);
  border-radius: 10px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
}
#ara_content .zai-tab1-scroll::-webkit-scrollbar-thumb,
#ara_content .zai-table-scroll::-webkit-scrollbar-thumb,
#ara_content .zai-actions-scroll::-webkit-scrollbar-thumb{
  background: linear-gradient(135deg, rgba(56,189,248,.65), rgba(34,197,94,.55));
  border-radius: 10px;
  box-shadow: 0 0 12px rgba(56,189,248,.35), inset 0 0 0 1px rgba(255,255,255,.25);
}
#ara_content .zai-tab1-scroll,
#ara_content .zai-table-scroll,
#ara_content .zai-actions-scroll{
  scrollbar-width: thin;
  scrollbar-color: rgba(56,189,248,.65) rgba(255,255,255,.06);
}

/* ---------- TAB1 TEK SCROLL WRAP ---------- */
#ara_content .zai-tab1-scroll{
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  padding-bottom: 2px;
  width: 100%;
 
}

/* ---------- TOP GRID (TAB1) ---------- */
#ara_content .zai-row{
  display: grid;
  grid-template-columns:
    70px 140px 44px 150px
    70px minmax(140px, 1fr)
    70px minmax(140px, 1fr);
  gap: 8px 10px;
  align-items: center;

  /* dar ekranda sÄ±kÄ±ÅŸÄ±p saÄŸa taÅŸmak yerine -> scrollâ€™a gitsin */
  width: 100%;

}
#ara_content .zai-row > *{ min-width: 0; } /* ðŸ”¥ taÅŸmayÄ± bitirir */

/* ---------- ACTIONS (TAB1 butonlar) ---------- */
#ara_content .zai-actions{
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: nowrap;
  width: max-content;
  min-width: 400px; /* sadece Kaydet/Sil var; kÃ¼Ã§Ã¼k tut */
  padding: 10px;
}

/* ---------- NUMBERS ---------- */
#ara_content .ta-right,
#ara_content .saga-bold{
  text-align:right !important;
  font-variant-numeric: tabular-nums;
  font-weight: 900 !important;
}

/* ---------- ARROW SYSTEM ---------- */
#ara_content .zai-rel{
  position: relative;
  width: 100%;
  min-width: 0;
}
#ara_content .zai-rel > .cam-input,
#ara_content .zai-rel > .cam-select{
  width: 100% !important;
  min-width: 0 !important;
  padding-right: 34px !important;
}
#ara_content .zai-arrow{
  position: absolute;
  top: 50%;
  right: 10px;
  transform: translateY(-50%);
  pointer-events: none;
  z-index: 10;
  font-weight: 900;
  font-size: 12px;
  color: rgba(255,255,255,.78);
  text-shadow: 0 0 10px rgba(0,0,0,.55);
}

/* ---------- TABLE WRAP ---------- */
#ara_content .zai-table-scroll{
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  margin-top:5px;
}

/* ---------- TABLE ---------- */
#ara_content #zaiTable{
  width:90%;
  min-width: 1100px;
  table-layout: fixed;
  border-collapse: separate;
  border-spacing: 0;
  border: 1px solid var(--cam-line2) !important;
  border-radius: 16px;
  overflow: hidden;
  background: rgba(255,255,255,.03) !important;
}
#ara_content #zaiTable thead th{
  position: sticky;
  top: 0;
  z-index: 2;
  background: linear-gradient(180deg,#1f3b5c,#162b44) !important;
  color: #fff !important;
  font-size: 12px;
  font-weight: 900;
  text-align: left;
  white-space: nowrap;
}
#ara_content #zaiTable th,
#ara_content #zaiTable td{
  border: 0 !important;
  border-bottom: 1px solid rgba(255,255,255,.10) !important;
  padding: 4px 6px !important;
  height: 28px !important;
  vertical-align: middle !important;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
#ara_content #zaiTable tbody td{
  background: rgba(255,255,255,.04) !important;
  color: rgba(255,255,255,.78) !important;
  overflow: visible !important;
  height: 38px !important;
  padding: 4px 8px !important;
}
#ara_content #zaiTable tfoot td{
  background: linear-gradient(180deg, rgba(56,189,248,.22), rgba(37,99,235,.18)) !important;
  color: #fff !important;
  font-weight: 900;
  border-top: 1px solid rgba(56,189,248,.45) !important;
  border-bottom: none !important;
  padding: 8px 10px !important;
}
#ara_content #zaiTable tbody .cam-input,
#ara_content #zaiTable tbody .cam-select{
  display: block !important;
  width: 100% !important;
  box-sizing: border-box !important;
  height: 30px !important;
  min-height: 30px !important;
  line-height: 1 !important;
}
#ara_content #zaiTable td .zai-rel{
  width: 100%;
  min-width: 0;
}

/* ---------- INFO (alt kÄ±sÄ±m) ---------- */
#ara_content .zai-actions-scroll{
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  padding: 0px;
  
  background: linear-gradient(180deg, var(--cam-bg1), var(--cam-bg2)) !important;
  border: 1px solid var(--cam-line) !important;
  border-radius: 18px;
  
  width:90%;
  margin: 10px 0;
}
#ara_content .zai-badges{
  display:flex;
  gap: 10px;
  flex-wrap: nowrap;
  margin-left: 12px;
  justify-content: flex-start;
  align-items: center;
}
#ara_content .zai-badge{
  display:inline-flex;
  align-items:center;
  justify-content:flex-start;
  min-width: 150px;
  padding: 6px 10px;
  border-radius: 12px;
  background: rgba(255,255,255,.04) !important;
  border: 1px solid rgba(255,255,255,.10) !important;
  color: rgba(255,255,255,.92) !important;
  font-weight: 900 !important;
  text-align: left;
}
#ara_content .zai-badge:empty::before{ content:"â€”"; opacity:.65; }

/* ---------- ERROR ---------- */
#ara_content #errorDiv{
  display:none;
  margin-top: 12px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(251,113,133,.35);
  background: rgba(251,113,133,.10);
  color: #fff;
  font-weight: 900;
}

</style>

<!-- TABS HEADER -->
<div class="cam-card p-3" >
  <ul class="nav nav-tabs cam-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="tab1-tab"
        data-bs-toggle="tab" data-bs-target="#tab1" type="button" role="tab"
        aria-controls="tab1" aria-selected="true">Fatura Bilgileri</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="tab2-tab"
        data-bs-toggle="tab" data-bs-target="#tab2" type="button" role="tab"
        aria-controls="tab2" aria-selected="false">Ek Bilgiler</button>
    </li>
  </ul>
</div>

<div class="tab-content" id="myTabContent">

  <!-- TAB 1 -->
  <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">
    <div class="cam-card p-3 mt-2">
    <div class="zai-tab1-scroll">
      <div class="group-box">
        <div class="zai-row">
          <label>Fis No</label>
          <input class="cam-input" maxlength="10" id="fisno"
            onkeydown="if(event.key==='Enter') OBS.ZAI.zaiOku()"
            ondblclick="OBS.ZAI.yeniFis();" />
          <button type="button" class="btn btn-secondary cam-icon" onclick="OBS.ZAI.sonfis()">
            <i class="fa fa-refresh"></i>
          </button>

          <input type="date" id="fisTarih" class="cam-input" th:value="${fisTarih}" />

          <label>Ana Grup</label>
          <div class="zai-rel">
            <select class="cam-select" id="anagrp" onchange="OBS.ZAI.anagrpChanged(this)">
              <option th:each="kod : ${anaKodlari}" th:value="${kod.ANA_GRUP}" th:text="${kod.ANA_GRUP}"></option>
            </select>
            <span class="zai-arrow">â–¼</span>
          </div>

          <label>Alt Grup</label>
          <div class="zai-rel">
            <select class="cam-select" id="altgrp" disabled></select>
            <span class="zai-arrow">â–¼</span>
          </div>

        </div>
      </div>
  
      <div class="group-box">
       
          <button class="btn btn-primary" type="button" id="zaikaydetButton" onclick="OBS.ZAI.zaiKayit()">Kaydet</button>
          <button class="btn btn-primary" type="button" id="zaisilButton" onclick="OBS.ZAI.zaiYoket()">Sil</button>
        
      </div>
</div>
   
    </div>
     <div id="errorDiv"></div>
  </div>

  <!-- TAB 2 -->
  <div class="tab-pane fade" id="tab2" role="tabpanel" aria-labelledby="tab2-tab">
    <div class="cam-card p-3 mt-2" >
      <div class="input-group mb-2">
        <span class="input-group-text cam-addon" style="width:150px;">1 -</span>
        <input type="text" id="a1" class="cam-input" style="max-width:300px;">
      </div>
      <div class="input-group">
        <span class="input-group-text cam-addon" style="width:150px;">2 -</span>
        <input type="text" id="a2" class="cam-input" style="max-width:300px;">
      </div>
    </div>
  </div>

</div>

<!-- SATIR EKLE -->
<div class="mt-2">
  <button type="button" class="btn btn-secondary cam-icon" onclick="OBS.ZAI.satirekle()">
    <i class="fa fa-plus"></i>
  </button>
</div>

<!-- TABLE -->

  <div class="zai-table-scroll">
    <table class="table table-bordered" id="zaiTable">
      <colgroup>
        <col style="width:50px;">
        <col style="width:100px;">
        <col style="width:100px;">
        <col style="width:175px;">
        <col style="width:150px;">
        <col style="width:100px;">
        <col style="width:80px;">
        <col style="width:175px;">
        <col>
      </colgroup>

      <thead>
        <tr>
          <th></th>
          <th>Barkod</th>
          <th>Urun Kodu</th>
          <th>Depo</th>
          <th class="saga-bold">Fiat</th>
          <th class="saga-bold">Miktar</th>
          <th>Birim</th>
          <th class="saga-bold">Tutar</th>
          <th>Izahat</th>
        </tr>
      </thead>

      <tbody id="tbody"></tbody>

      <tfoot>
        <tr>
          <td></td><td></td><td></td><td></td>
          <td></td>
          <td id="totalMiktar" class="saga-bold">0.000</td>
          <td></td>
          <td id="totalTutar" class="saga-bold">0.00</td>
          <td></td>
        </tr>
      </tfoot>
    </table>
  </div>

  <!-- INFO -->
  
  <div class="zai-actions-scroll">
    <div class="zai-actions">
      <span style="width:90px; font-weight:900; color:rgba(255,255,255,.72);">Barkod:</span>
      <input id="barkod" class="cam-input" style="width:170px;" />
      <div class="zai-badges">
        <label id="adil" class="zai-badge"></label>
        <label id="anagrpl" class="zai-badge"></label>
        <label id="altgrpl" class="zai-badge"></label>
      </div>
    </div>
</div>


<input type="hidden" id="zayiBilgi">


<div th:replace="~{modal/stok/urunadlari :: urnsecondModal}"></div>
