<link rel="stylesheet" href="style/yenihsppln.css" />

<style>
/* =====================================================
   2026 CAM – KAMBİYO / BORDRO (EXTRA KOMPAKT – 38px)
   wrapper: #ara_content
   ===================================================== */

#ara_content{ color: rgba(255,255,255,.92); }

/* CARD */
#ara_content .card.p-4{
  padding: 12px !important;
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06)) !important;
  border: 1px solid rgba(255,255,255,.16) !important;
  border-radius: 18px;
  box-shadow: 0 18px 55px rgba(0,0,0,.45);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}

/* NAV TABS */
#ara_content .nav-tabs{
  border-bottom: 1px solid rgba(255,255,255,.14) !important;
  gap: 6px;
}
#ara_content .nav-tabs .nav-link{
  border: 1px solid rgba(255,255,255,.14) !important;
  border-bottom: none !important;
  background: rgba(255,255,255,.06) !important;
  color: rgba(255,255,255,.78) !important;
  border-radius: 14px 14px 0 0 !important;
  font-weight: 900;
  padding: 8px 12px;
}
#ara_content .nav-tabs .nav-link.active{
  background: linear-gradient(135deg, rgba(56,189,248,.28), rgba(34,197,94,.18)) !important;
  color: #fff !important;
  box-shadow: inset 0 0 0 1px rgba(56,189,248,.35);
}

/* LAYOUT */
#ara_content .cardd{
  display: flex;
  gap: 12px;
  align-items: flex-start;
}
#ara_content .child{ width: 80%; }
#ara_content .child2{ width: 20%; }

@media (max-width:1200px){
  #ara_content .cardd{ flex-direction: column; }
  #ara_content .child,#ara_content .child2{ width: 100%; }
}

/* GROUP BOX */
#ara_content .group-box{
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(8,14,26,.32);
  border-radius: 16px;
  padding: 10px !important;
  margin: 8px 0 !important;
}
/* padding-left span’leri sustur */
#ara_content .group-box span[style*="padding-left"]{ display:none !important; }

/* COMMON HEIGHT 38 */
#ara_content .form-control,
#ara_content .form-select,
#ara_content .input-group-text,
#ara_content label.form-control{
  height: 38px !important;
  min-height: 38px !important;
}

/* LABEL / TEXT */
#ara_content label,
#ara_content .input-group-text,
#ara_content label.form-control{
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.16) !important;
  background: rgba(8,14,26,.45) !important;
  color: rgba(255,255,255,.88) !important;
  font-weight: 900;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
}

/* INPUT / SELECT */
#ara_content .form-control,
#ara_content .form-select{
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.16) !important;
  background: rgba(8,14,26,.55) !important;
  color: rgba(255,255,255,.92) !important;
  padding: 6px 12px !important;
  box-sizing: border-box;
  outline: none;
}
#ara_content .form-control::placeholder{
  color: rgba(255,255,255,.55) !important;
  font-weight: 600;
}
#ara_content .form-control:focus,
#ara_content .form-select:focus{
  border-color: rgba(56,189,248,.65) !important;
  box-shadow: 0 0 0 4px rgba(56,189,248,.18);
  background: rgba(8,14,26,.65) !important;
  color:#fff !important;
}

/* datalist ok (span ▼) */
#ara_content span[style*="pointer-events: none"]{
  color: rgba(255,255,255,.80) !important;
  text-shadow: 0 0 8px rgba(56,189,248,.25);
}

/* value label */
#ara_content #lblcheskod,
#ara_content .val-right{
  height: 38px !important;
  display:flex;
  align-items:center;
  padding: 0 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.04);
  color: rgba(255,255,255,.90);
  font-weight: 900;
  box-sizing: border-box;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
#ara_content .val-right{ justify-content:flex-end; }

/* BUTTONS */
#ara_content .btn-primary{
border-radius: 14px;
  font-weight: 900;
  height: 40px;
  background: rgba(56,189,248,.18) !important;
  border: 1px solid rgba(56,189,248,.35) !important;
  color: rgba(255,255,255,.95) !important;
}
#ara_content .btn-primary:hover{
  background: rgba(56,189,248,.26) !important;
  border-color: rgba(56,189,248,.55) !important;
  transform: translateY(-1px);
}


#ara_content .btn.btn-secondary{
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.16) !important;
  background: rgba(255,255,255,.06) !important;
  color: rgba(255,255,255,.88) !important;
}
#ara_content .btn.btn-secondary:hover{
  background: rgba(56,189,248,.12) !important;
  border-color: rgba(56,189,248,.35) !important;
}
/* ===== KOMPAKT GRID BLOKLARI ===== */
#ara_content .gb-top{
  display:grid !important;
  grid-template-columns: 80px 140px 46px 130px 90px 160px 70px 70px;
  gap: 8px 10px;
  align-items:center;
}
#ara_content .gb-cari{
  display:grid !important;
  grid-template-columns: 80px 140px 1fr;
  gap: 8px 10px;
  align-items:center;
}

#ara_content .gb-cariadi{
  display:grid !important;
  grid-template-columns: 80px 350px 1fr;
  gap: 8px 10px;
  align-items:center;
}

#ara_content .gb-actions{
  display:flex !important;
  flex-wrap:wrap;
  gap: 8px;
  align-items:center;
}
#ara_content .gb-right{
  display:grid !important;
  grid-template-columns: 90px 1fr;
  gap: 8px 10px;
  align-items:center;
}
#ara_content .gb-aciklama{
  display:grid !important;
  grid-template-columns: 150px 1fr;
  gap: 8px 10px;
  align-items:center;
}

@media (max-width:1200px){
  #ara_content .gb-top{ grid-template-columns: 90px 1fr 46px 1fr; }
}

/* TABLE (hover yok) */
/* =========================
   TABLE – gbTable
   ========================= */
#ara_content #gbTable{
  width: 100%;
  margin-top: 8px;
  border-collapse: separate;
  border-spacing: 0;
  border: 1px solid rgba(255,255,255,.14) !important;
  border-radius: 16px;
  overflow: hidden;
  background: rgba(255,255,255,.03) !important;
}
#ara_content #gbTable thead th{
  position: sticky;
  top: 0;
  z-index: 2;
  background: linear-gradient(180deg,#1f3b5c,#162b44) !important;
  color: #fff !important;
  font-size: 13px;
  font-weight: 900;
  text-align: left;
  white-space: nowrap;
}
#ara_content #gbTable th,
#ara_content #gbTable td{
  border: 0 !important;
  border-bottom: 1px solid rgba(255,255,255,.10) !important;
  padding: 6px 10px !important;
  height: 28px;
  white-space: nowrap;
  vertical-align: middle;
}
#ara_content #gbTable tbody td{
  background: rgba(255,255,255,.04) !important;
  color: rgba(255,255,255,.78) !important;
}
#ara_content #gbTable tbody tr.selected > *{
  background: linear-gradient(135deg, rgba(56,189,248,.18), rgba(34,197,94,.12)) !important;
  color: #fff !important;
}
#ara_content .double-column,
#ara_content .saga-bold{
  text-align: right !important;
  font-weight: 900;
}
#ara_content #gbTable tfoot td{
  background: linear-gradient(180deg, rgba(56,189,248,.22), rgba(37,99,235,.18)) !important;
  color: #fff !important;
  font-weight: 900;
  border-top: 1px solid rgba(56,189,248,.45) !important;
  border-bottom: none !important;
  padding: 8px 10px !important;
}
#ara_content #totalTutar{
  font-size: 14px;
  font-weight: 900;
  text-align: right;
  color: #fff !important;
  text-shadow: 0 2px 10px rgba(56,189,248,.75);
}

/* ERROR */
#ara_content #errorDiv,
#ara_content #errorDiv2{
  display:none;
  margin-top: 10px;
  padding: 8px 10px;
  border-radius: 14px;
  border: 1px solid rgba(251,113,133,.35);
  background: rgba(251,113,133,.10);
  color: #fff;
  font-weight: 900;
}

#ara_content input[type="date"]{ color-scheme: dark; }
</style>

<!-- ===================== TABS ===================== -->
<div class="card p-4">
  <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="tab1-tab"
        data-bs-toggle="tab" data-bs-target="#tab1" type="button"
        role="tab" aria-controls="tab1" aria-selected="true">
        Giris Bordro
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="tab2-tab"
        data-bs-toggle="tab" data-bs-target="#tab2" type="button"
        role="tab" aria-controls="tab2" aria-selected="false">
        Aciklama
      </button>
    </li>
  </ul>
</div>

<div class="tab-content" id="myTabContent">

  <!-- ===================== TAB 1 ===================== -->
  <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">

    <div class="cardd p-4">
      <!-- LEFT -->
      <div class="child">

        <!-- TOP LINE -->
        <div class="group-box">
          <div class="gb-top">
            <label>Bordro No</label>
            <input class="form-control" style="font-weight:bold;" maxlength="12"
                   id="bordrono" onkeydown="bordroOkuma(event);" ondblclick="yeniBordro();">

            <button type="button" class="btn btn-secondary" onclick="songirisBordro()">
              <i class="fa fa-refresh"></i>
            </button>

            <input type="date" id="bordroTarih" class="form-control"
                   th:value="${evrakTarih}" style="font-weight:bold;" />

            <label>Ozel Kod</label>
            <div style="position:relative;">
              <input class="form-control cins_bold" list="ozelkodOptions" maxlength="12" id="ozelkod">
              <datalist id="ozelkodOptions">
                <option th:each="kod : ${ozelKodlar}" th:value="${kod.Giris_Ozel_Kod}"></option>
              </datalist>
              <span style="position:absolute; top:50%; right:10px; transform:translateY(-50%); pointer-events:none;">▼</span>
            </div>

            <label>Doviz</label>
            <input class="form-control cins_bold" id="dvzcinsi" th:value="${doviz}" style="max-width:90px;">
          </div>
        </div>

        <!-- CARI -->
        <div class="group-box">
          <div class="gb-cari">
            <label>Cari Kodu</label>

            <div style="position:relative;">
              <input class="form-control cins_bold"
                     ondblclick="openSecondModal('bcheskod', 'cekgiris')"
                     list="bhkoduOptions" maxlength="12" id="bcheskod"
                     oninput="hesapAdiOgren(this.value, 'lblcheskod'); validateAutoSearch('bcheskod', 'bhkoduOptions')">
              <datalist id="bhkoduOptions">
                <option th:each="kod : ${hesapKodlari}" th:value="${kod.HESAP}"></option>
              </datalist>
              <span style="position:absolute; top:50%; right:10px; transform:translateY(-50%); pointer-events:none;">▼</span>
            </div>
          </div>
          
          <div class="gb-cariadi" style="margin-top:8px;">
            <span></span>
           
            <div id="lblcheskod">...</div>
           
          </div>
        </div>

        <!-- ACTIONS -->
        <div class="group-box">
          <div class="gb-actions">
            <button class="btn btn-primary" type="button" id="gbkaydetButton" onclick="gbKayit()">Kaydet</button>
            <button class="btn btn-primary" type="button" id="gbsilButton" onclick="gbYoket()">Sil</button>
            <button class="btn btn-primary" type="button" id="gbcariButton" onclick="openFirstModal('cekgir')">Cari Kayit</button>
            <button class="btn btn-primary" type="button" id="indirButton" onclick="gbDownload()">Indir</button>
            <button class="btn btn-primary" type="button" id="mailButton" onclick="gbmailAt()">Email Gonder</button>
          </div>
        </div>

      </div>

      <!-- RIGHT -->
      <div class="child2">
        <div class="group-box">
          <div class="gb-right">
            <label>Faiz</label>
            <input class="form-control cins_bold" id="faiz" style="text-align:right; max-width:140px;" oninput="ortgun()">

            <label>Faiz Tutari</label>
            <div class="val-right" id="lblfaiztutari">0.00</div>

            <label>Ort.Gun</label>
            <div class="val-right" id="lblortgun">0</div>
          </div>
        </div>
      </div>
    </div>

    <div id="errorDiv"></div>
    <div th:with="errorMessage=${errorMessage ?: ''}" id="errorDiv2"
         th:if="${errorMessage}" th:text="${errorMessage}"></div>

  </div>

  <!-- ===================== TAB 2 ===================== -->
  <div class="tab-pane fade" id="tab2" role="tabpanel" aria-labelledby="tab2-tab">
    <div class="card p-4">
      <div class="gb-aciklama">
        <span class="input-group-text">Aciklama 1</span>
        <input type="text" id="aciklama1" class="form-control" placeholder="...">

        <span class="input-group-text">Aciklama 2</span>
        <input type="text" id="aciklama2" class="form-control" placeholder="...">
      </div>
    </div>
  </div>

</div>

<!-- ===================== ADD ROW BUTTON ===================== -->
<button type="button" class="btn btn-secondary ml-2" onclick="cekgiraddRow()">
  <i class="fa fa-plus"></i>
</button>

<!-- ===================== TABLE ===================== -->
<table class="table table-bordered tah-table" id="gbTable" style="margin-top: 5px;">
  <thead class="thead-dark">
    <tr>
      <th></th>
      <th>CEK NO</th>
      <th>VADE</th>
      <th>BANKA</th>
      <th>SUBE</th>
      <th>SERI NO</th>
      <th>ILK BORCLU</th>
      <th>HESAP</th>
      <th>CINS</th>
      <th class="double-column">TUTAR</th>
    </tr>
  </thead>
  <tbody id="tbody"></tbody>
  <tfoot>
    <tr>
      <td></td><td></td><td></td><td></td><td></td>
      <td></td><td></td><td></td>
      <td style="font-weight: bold;">TOPLAM</td>
      <td id="totalTutar" class="saga-bold">0.00</td>
    </tr>
  </tfoot>
</table>

<!-- ===================== COUNT CARD ===================== -->
<div class="card p-4">
  <div class="form-row">
    <span style="padding-left: 20px;">Cek Sayisi :</span>
    <label style="text-align: right; width: 50px;" id="ceksayisi">0</label>
  </div>
</div>

<input type="hidden" id="cekgirBilgi" name="cekgirBilgi">

<script src="/obs_js_files/kambiyo/cekgiris.js"></script>

<div th:replace="~{modal/borc_alacak :: modalborcalacak}"></div>
<div th:replace="~{modal/yenihsppln :: secondModal}"></div>